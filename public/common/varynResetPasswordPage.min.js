var varyn=function(parameters){"use strict";var siteConfiguration={debug:!0,originWhiteList:["www.enginesis.com","games.enginesis.com","metrics.enginesis.com","www.enginesis-l.com","games.enginesis-l.com","metrics.enginesis-l.com","www.enginesis-q.com","games.enginesis-q.com","metrics.enginesis-q.com"],varynUserInfoCookieName:"varynuser",userInfoKey:"varynuserinfo",developerKey:parameters.developerKey,siteId:parameters.siteId,gameId:parameters.gameId,gameGroupId:parameters.gameGroupId,serverStage:parameters.serverStage,serverHostDomain:"varyn"+parameters.serverStage+".com",languageCode:parameters.languageCode,gameListIdTop:parameters.gameListIdTop||4,gameListIdNew:parameters.gameListIdNew||5,homePagePromoId:parameters.homePagePromoId||3,blogPagePromoId:parameters.blogPagePromoId||4,gameListState:1,userInfo:parameters.userInfo,authToken:parameters.authToken,minPasswordLength:4,minUserNameLength:3,minimumAge:13,ssoParameters:parameters},unconfirmedNetworkId=1,currentPage="",waitingForUserNameReply=!1,domImage,enginesisSession=window.enginesis,pageViewParameters=null,_isLogout=!1;function getNetworkId(){return void 0!==siteConfiguration.userInfo&&null!=siteConfiguration.userInfo&&void 0!==siteConfiguration.userInfo.networkId?siteConfiguration.userInfo.networkId:unconfirmedNetworkId}function getVarynUserInfoFromCookie(){var e=commonUtilities.cookieGet(siteConfiguration.varynUserInfoCookieName);return null!=e&&""!=e?JSON.parse(e):null}function getSavedUserInfo(){var e=commonUtilities.loadObjectWithKey(siteConfiguration.userInfoKey);return"string"==typeof e?enginesis.queryStringToObject(e):e}function saveUserInfo(e){return commonUtilities.saveObjectWithKey(siteConfiguration.userInfoKey,e)}function clearSavedUserInfo(){return commonUtilities.removeObjectWithKey(siteConfiguration.userInfoKey)}return{initApp:function(e,s){var t={siteId:siteConfiguration.siteId,gameId:siteConfiguration.gameId||0,gameGroupId:siteConfiguration.gameGroupId||0,serverStage:"enginesis."+siteConfiguration.serverHostDomain,authToken:siteConfiguration.authToken||"",developerKey:siteConfiguration.developerKey,languageCode:this.parseLanguageCode(siteConfiguration.languageCode),callBackFunction:this.enginesisCallBack.bind(this)},o=null;return _isLogout=s.isLogout,currentPage=this.getCurrentPage(),pageViewParameters=s,enginesis.init(t),null!=pageViewParameters&&void 0!==pageViewParameters.showSubscribe&&"1"==pageViewParameters.showSubscribe&&varynApp.showSubscribePopup(),void 0!==e&&null!=e&&(o=e(varynApp,siteConfiguration)).pageLoaded(pageViewParameters),_isLogout?this.logout().then((function(){void 0!==o.logoutComplete&&o.logoutComplete()})):this.checkIsUserLoggedIn(),o},trackEvent:function(e,s,t){"function"==typeof gtag&&gtag({category:e,action:s,data:t})},saveRefreshToken:function(e){null!=enginesisSession&&enginesisSession.saveRefreshToken(e)},getVarynUserInfo:function(){var e=siteConfiguration.userInfo;return null==e&&null==(e=commonUtilities.loadObjectWithKey(siteConfiguration.userInfoKey))&&(e=getVarynUserInfoFromCookie()),e},getEnginesisSession:function(){return enginesisSession},getSiteConfiguration:function(){return siteConfiguration},isLogout:function(){return _isLogout},parseLanguageCode:function(e){return e.substr(0,2)},isValidEmail:function(e){return/\S+@\S+\.\S+/.test(e)},isValidUserName:function(e){return/^[a-zA-Z0-9_@!~\$\.\-\|\s?]{3,20}$/.test(e)},isChangedUserName:function(e){var s=siteConfiguration.userInfo;return null==s&&(s=this.getVarynUserInfo()),!(null!=s&&s.user_name==e)},isChangedUserInfoField:function(e,s){var t,o=!1,n=null,i=null;return void 0!==siteConfiguration.userInfo&&null!=siteConfiguration.userInfo&&void 0!==siteConfiguration.userInfo[e]&&(n=siteConfiguration.userInfo[e]),null!=(t=document.getElementById(s))&&(i=t.value),null!=n&&null!=i&&(o=n!=i),o},isValidPassword:function(e){var s=e.trim().length;return s>=siteConfiguration.minPasswordLength&&s==e.length},ageInYearsFromNow:function(e){var s,t,o=new Date,n=new Date(e);return isNaN(n.getFullYear())&&(n=o),s=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),t=Date.UTC(o.getFullYear(),o.getMonth(),o.getDate()),Math.floor((t-s)/31536e6)},isValidDateOfBirth:function(e){return this.ageInYearsFromNow(e)>=siteConfiguration.minimumAge},mysqlDateToHumanDate:function(e){var s,t,o=new Date(e);return null==o&&(o=new Date),(s=o.getHours()%12)<1&&(s="12"),(t=o.getMinutes()%12)<10&&(t="0"+t),o.toDateString()+" "+s+":"+t+" "+(o.getHours()>11?"PM":"AM")},commaGroupNumber:function(e){return"Number"!=typeof e&&(e=Number(e)),e.toLocaleString()},getCurrentPage:function(){var e=location.href.split("/").slice(-1);return e.indexOf(".")>0?e=e.split(".").slice(0):""==e&&(e="index"),e.toString()},showErrorMessage:function(e,s){var t=document.getElementById("errorContent"),o=document.getElementById(s);""==e?t.innerHTML="<p>&nbsp;</p>":null!=t&&(t.innerHTML='<p class="text-error">'+e+"</p>"),null!=o&&($(o).removeClass("popup-form-input").addClass("popup-form-input-error"),o.focus())},setElementSizeAndColor:function(e,s,t,o){var n="margin: 0; padding: 0; left: 0; top: 0; width: "+s+"px; height: "+t+"px; min-height: "+t+"px !important; overflow: hidden;";null!=o&&""!=o&&(n+=" background-color: "+o+";"),e.setAttribute("style",n)},checkChildLayout:function(e){var s,t,o,n=e.children;for(s=0;s<n.length;s++)o=null!=(t=n[s]).name?t.name:null!=t.id?t.id:t.localName,console.log(e.localName+": Child "+o+" ("+t.style.width+","+t.style.height+")")},compareTitle:function(e,s){return e.title<s.title?-1:e.title>s.title?1:0},compareDate:function(e,s,t){return e[t]<s[t]?1:e[t]>s[t]?-1:0},insertAndExecute:function(id,text){document.getElementById(id).innerHTML=text;for(var scripts=document.getElementById(id).getElementsByTagName("script"),i=0;i<scripts.length;i++)if(""!=scripts[i].src){var tag=document.createElement("script");tag.src=scripts[i].src,document.getElementsByTagName("head")[0].appendChild(tag)}else eval(scripts[i].innerHTML)},checkBrowserCORSCompatibility:function(){return void 0!==window.postMessage},verifyCORSWhiteList:function(e){for(var s=!1,t=0;t<siteConfiguration.originWhiteList.length;t++)if(e===siteConfiguration.originWhiteList[t]){s=!0;break}return s},hideSubscribePopup:function(){this.showSubscribePopup(!1)},showSubscribePopup:function(e){e?(document.getElementById("subscribe-email").value=enginesisSession.anonymousUserGetSubscriberEmail(),this.setPopupMessage("modal-subscribe","",null),this.trackEvent("subscribe","prompt",currentPage)):$("#modal-subscribe").modal("hide")},showRegistrationPopup:function(e){e?($("#modal-register").modal("show"),this.setPopupMessage("modal-register","",null),this.onChangeRegisterUserName(document.getElementById("register-username"),"popup_user_name_unique"),this.trackEvent("register","prompt",currentPage)):$("#modal-register").modal("hide")},showLoginPopup:function(e){e?($("#modal-login").modal("show"),this.setPopupMessage("modal-login","",null),this.trackEvent("login","prompt",currentPage)):$("#modal-login").modal("hide")},showForgotPasswordPopup:function(e){e?($("#modal-forgot-password").modal("show"),this.setPopupMessage("modal-forgot-password","",null),this.trackEvent("forgotpassword","prompt",currentPage)):$("#modal-forgot-password").modal("hide")},setPopupMessage:function(e,s,t){var o=$("#"+e).find(".modalMessageArea");null!=o&&(o.css("display","block"),o.text(s),null!=t&&o.attr("class","modalMessageArea "+t))},popupCloseClicked:function(){this.closeInfoMessagePopup(),this.showSubscribePopup(!1),this.showLoginPopup(!1),this.showRegistrationPopup(!1),this.showForgotPasswordPopup(!1)},showInfoMessagePopup:function(e,s,t){var o=document.getElementById("infoMessageTitle"),n=document.getElementById("infoMessageArea");o.innerText=e,n.innerHTML=s,$("#modal-message").modal("show"),t>0&&window.setTimeout(this.closeInfoMessagePopup.bind(this),t)},closeInfoMessagePopup:function(){$("#modal-message").modal("hide")},popupSubscribeClicked:function(){var e=document.getElementById("subscribe-email").value,s="";return this.isValidEmail(e)?(this.setPopupMessage("modal-subscribe","Subscribing "+e+" with the service...","popupMessageResponseOK"),enginesisSession.anonymousUserSetSubscriberEmail(e),enginesisSession.newsletterAddressAssign(e,"","","2",null),this.trackEvent("subscribe","submit",currentPage)):(s="subscribe-email",this.setPopupMessage("modal-subscribe","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),document.getElementById(s).focus()),""==s},popupRegistrationClicked:function(){var e=document.getElementById("register-email").value,s=document.getElementById("register-password").value,t=document.getElementById("register-username").value,o=document.getElementById("register-agreement").value,n="";return""!=n||this.isValidEmail(e)||(this.setPopupMessage("modal-register","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),n="register-email"),""!=n||this.isValidUserName(t)||(this.setPopupMessage("modal-register","Your user name "+t+" looks bad. Can you try again?","popupMessageResponseError"),n="register-username"),""!=n||this.testUserNameIsUnique("popup_user_name_unique")||(this.setPopupMessage("modal-register","Your user name "+t+" is in use by another user. Please pick a unique user name.","popupMessageResponseError"),n="register-username"),""!=n||this.isValidPassword(s)||(this.setPopupMessage("modal-register","Your password looks bad. Can you try again?","popupMessageResponseError"),n="register-password"),""==n&&o<2&&(this.setPopupMessage("modal-register","You must agree with the terms of use or you cannot register.","popupMessageResponseError"),n="register-agreement"),""!=n&&($(n).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(n).focus()),""==n&&(document.getElementById("registration-form").submit(),this.trackEvent("register","submit",currentPage)),""==n},popupLoginClicked:function(){var e=document.getElementById("login_password").value.toString(),s=document.getElementById("login_username").value.toString(),t="";return""!=t||this.isValidUserName(s)||(this.setPopupMessage("modal-login","Your user name "+s+" looks bad. Can you try again?","popupMessageResponseError"),t="login_username"),""!=t||this.isValidPassword(e)||(this.setPopupMessage("modal-login","Your password looks bad. Can you try again?","popupMessageResponseError"),t="login_password"),""!=t&&($(t).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(t).focus()),""==t&&(document.getElementById("login-form").submit(),this.trackEvent("login","submit",currentPage)),""==t},popupForgotPasswordClicked:function(){var e=document.getElementById("forgotpassword_email").value.toString(),s=document.getElementById("forgotpassword_username").value.toString(),t="";return""!=t||this.isValidUserName(s)||(this.setPopupMessage("modal-forgot-password","Your user name '"+s+"' looks bad. Can you try again?","popupMessageResponseError"),t="forgotpassword_username"),""!=t||this.isValidEmail(e)||(this.setPopupMessage("modal-forgot-password","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),t="forgotpassword_email"),""!=t&&($(t).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(t).focus()),""==t&&(document.getElementById("forgot-password-form").submit(),this.trackEvent("forgotpassword","submit",currentPage)),""==t},formForgotPasswordClicked:function(){var e=document.getElementById("forgotpassword_email_form").value.toString(),s=document.getElementById("forgotpassword_username_form").value.toString(),t="";return""!=t||this.isValidUserName(s)||(this.setPopupMessage("forgot-password-form","Your user name '"+s+"' looks bad. Can you try again?","popupMessageResponseError"),t="forgotpassword_username"),""!=t||this.isValidEmail(e)||(this.setPopupMessage("forgot-password-form","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),t="forgotpassword_email"),""!=t&&($(t).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(t).focus()),""==t},formUnsubscribeClicked:function(){var e=document.getElementById("unsubscribe_email_form").value.toString(),s="";return this.isValidEmail(e)||(this.setPopupMessage("unsubscribe-form","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),s="unsubscribe_email_form"),""!=s&&($(s).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(s).focus()),""==s},onClickShowPassword:function(e){var s=document.getElementById("register-showpassword"),t=document.getElementById("register-password"),o=document.getElementById("register-showpassword-icon"),n=document.getElementById("register-showpassword-text");null!=s&&(null==t&&(t=document.getElementById("newPassword")),"text"==t.type?(s.checked=!1,t.type="password",o.className="glyphicon glyphicon-eye-open",n.innerText="Show"):(s.checked=!0,t.type="text",o.className="glyphicon glyphicon-eye-close",n.innerText="Hide"))},registerSSO:function(e,s){if(_isLogout||null==e||null==e){if(_isLogout){ssoGoogle.logout((function(){console.log("Google user is logged out")}))}}else(void 0===s||null===s&&void 0!==e.networkId)&&(s=e.networkId),unconfirmedNetworkId=s,varynApp.trackEvent("login-complete","sso",varynApp.networkIdToString(s)),enginesisSession.userLoginCoreg(e,s,null)},checkIsUserLoggedIn:function(){enginesisSession.isUserLoggedIn()?this.checkLoggedInSSO(enginesis.networkId).then(this.loginSSOSucceeded,this.loginSSOFailed):this.loadAllSupportedNetworks().length>0||this.loginSSOFailed(null)},loadAllSupportedNetworks:function(){var e=enginesisSession.supportedSSONetworks(),s=[];for(var t in e)e.hasOwnProperty(t)&&"Enginesis"!=t&&(s.push(e[t]),this.loadSupportedNetwork(e[t]));return s},logout:function(){var e=this,s=enginesis.networkId;return new Promise((function(t,o){clearSavedUserInfo(),e.logoutSSO(s,(function(){e.checkIsUserLoggedIn(),t()}))}))},networkIdToString:function(e){var s=null;switch(e){case enginesis.supportedNetworks.Enginesis:s="Enginesis";break;case enginesis.supportedNetworks.Facebook:s="Facebook";break;case enginesis.supportedNetworks.Google:s="Google";break;case enginesis.supportedNetworks.Twitter:s="Twitter"}return s},loadSupportedNetwork:function(e){switch(e){case enginesis.supportedNetworks.Enginesis:break;case enginesis.supportedNetworks.Facebook:"undefined"!=typeof ssoFacebook&&ssoFacebook.load(this.ssoFacebookParameters());break;case enginesis.supportedNetworks.Google:"undefined"!=typeof ssoGoogle&&ssoGoogle.load(this.ssoGoogleParameters());break;case enginesis.supportedNetworks.Twitter:"undefined"!=typeof ssoTwitter&&ssoTwitter.load(this.ssoTwitterParameters());break;case enginesis.supportedNetworks.Apple:"undefined"!=typeof ssoApple&&ssoApple.load(this.ssoAppleParameters())}},checkIsUserLoggedInNetworkId:function(e,s){var t=this;e.length>s?t.checkLoggedInSSO(e[s]).then((function(o){null==o||o instanceof Error?(s++,t.checkIsUserLoggedInNetworkId(e,s)):t.loginSSOSucceeded(o)}),(function(){s++,t.checkIsUserLoggedInNetworkId(e,s)})):t.loginSSOFailed(new Error("User is not logged in after checking "+s+" networks."))},loginSSOSucceeded:function(e){null!=pageViewParameters&&void 0!==pageViewParameters.userInfo&&""!=pageViewParameters.userInfo?(siteConfiguration.userInfo=JSON.parse(pageViewParameters.userInfo),saveUserInfo(siteConfiguration.userInfo)):(siteConfiguration.userInfo=getSavedUserInfo(),siteConfiguration.userInfo)},loginSSOFailed:function(e){enginesisSession.isUserLoggedIn()||e&&(e instanceof Error?console.log("Error from varyn.loginSSOFailed: "+e.message):"string"==typeof e?console.log("Error from varyn.loginSSOFailed: "+e):console.log("Error from varyn.loginSSOFailed: "+e.toString()))},checkLoggedInSSO:function(e){var s=this;return new Promise((function(t,o){switch(e){case enginesis.supportedNetworks.Enginesis:enginesisSession.isUserLoggedIn()?t(enginesis.getLoggedInUserInfo()):o(null);break;case enginesis.supportedNetworks.Facebook:ssoFacebook&&ssoFacebook.loadThenLogin(s.ssoFacebookParameters()).then(t,o);break;case enginesis.supportedNetworks.Google:ssoGoogle&&ssoGoogle.loadThenLogin(s.ssoGoogleParameters()).then(t,o);break;case enginesis.supportedNetworks.Twitter:ssoTwitter&&ssoTwitter.loadThenLogin(s.ssoTwitterParameters()).then(t,o);break;case enginesis.supportedNetworks.Apple:ssoApple&&ssoApple.loadThenLogin(s.ssoAppleParameters()).then(t,o);break;default:o(Error("Network "+e+" is not handled with SSO."))}}))},loginSSO:function(e,s){if(_isLogout||null==e||null==e){if(_isLogout){ssoGoogle.logout((function(){console.log("Google user is logged out")}))}}else unconfirmedNetworkId=s,enginesisSession.userLoginCoreg(e,s,null)},logoutSSO:function(e,s){switch(e){case enginesis.supportedNetworks.Enginesis:void 0!==s&&null!=s&&s();break;case enginesis.supportedNetworks.Facebook:"undefined"!=typeof ssoFacebook&&ssoFacebook.logout(s);break;case enginesis.supportedNetworks.Google:"undefined"!=typeof ssoGoogle&&ssoGoogle.logout(s);break;case enginesis.supportedNetworks.Twitter:"undefined"!=typeof ssoTwitter&&ssoTwitter.logout(s);break;case enginesis.supportedNetworks.Apple:"undefined"!=typeof ssoApple&&ssoApple.logout(s)}},ssoStatusCallback:function(e,s){switch(e){case enginesis.supportedNetworks.Facebook:FB.getLoginStatus(varynApp.facebookStatusChangeCallback);break;case enginesis.supportedNetworks.Google:null!=s&&(s.isSignedIn.get()?console.log("Gplus user is signed in"):console.log("Gplus user is NOT signed in"));break;case enginesis.supportedNetworks.Twitter:break;default:console.log("varynApp.checkLoginStateSSO unsupported network "+e)}},ssoFacebookParameters:function(){return{networkId:enginesis.supportedNetworks.Facebook,applicationId:siteConfiguration.ssoParameters.facebookAppId}},ssoGoogleParameters:function(){return{networkId:enginesis.supportedNetworks.Google,applicationId:siteConfiguration.ssoParameters.googleAppId}},ssoTwitterParameters:function(){return{networkId:enginesis.supportedNetworks.Twitter,applicationId:siteConfiguration.ssoParameters.twitterAppId}},ssoAppleParameters:function(){return{networkId:enginesis.supportedNetworks.Apple,applicationId:siteConfiguration.ssoParameters.appleAppId}},setKeyboardListeners:function(){},keyboardListener:function(e){e&&e.key&&"?"==e.key&&(this.setFocusToSearchInput(),e.preventDefault())},setFocusToSearchInput:function(){var e=document.getElementsByName("q");e&&e.length>0&&((e=e[0]).focus(),e.value="")},setupRegisterUserNameOnChangeHandler:function(){var e=document.getElementById("register-username");null!=e&&(e.addEventListener("change",this.onChangeRegisterUserName.bind(this)),e.addEventListener("input",this.onChangeRegisterUserName.bind(this)),e.addEventListener("propertychange",this.onChangeRegisterUserName.bind(this)))},onChangeRegisterUserName:function(e,s){var t;waitingForUserNameReply||null==e||(null!=e.target&&(e=e.target),null==s&&(s=$(e).data("target")),t=e.value.toString(),varynApp.isChangedUserName(t)?t&&varynApp.isValidUserName(t)?(waitingForUserNameReply=!0,domImage=s,enginesisSession.userGetByName(t,varynApp.onChangeRegisteredUserNameResponse.bind(varynApp))):this.setUserNameIsUnique(s,!1):this.setUserNameIsUnique(s,!0))},onChangeRegisteredUserNameResponse:function(e){var s=!1;waitingForUserNameReply=!1,null!=e&&null!=e.fn&&(s="1"==e.results.status.success),this.setUserNameIsUnique(domImage,!s),domImage=null},setUserNameIsUnique:function(e,s){if(e){var t=document.getElementById(e);null!=t&&(s?(t.classList.remove("username-is-not-unique"),t.classList.add("username-is-unique"),t.style.display="inline-block"):(t.classList.remove("username-is-unique"),t.classList.add("username-is-not-unique"),t.style.display="inline-block"))}},testUserNameIsUnique:function(e){return $("#"+e).hasClass("username-is-unique")},onChangeEmail:function(e){if(e&&e.target){var s=e.target,t=!1;"change"==e.type&&(this.isValidEmail(s.value)||(this.showErrorMessage("Your email "+s.value+" looks bad. Can you try again?",s.id),t=!0)),t||(s.classList.remove("popup-form-input-error"),s.classList.add("popup-form-input"),this.showErrorMessage("",null))}},handleNewsletterServerResponse:function(e,s){1==e?(this.setPopupMessage("modal-subscribe","You are subscribed - Thank you!","popupMessageResponseOK"),window.setTimeout(this.hideSubscribePopup.bind(this),2500)):this.setPopupMessage("modal-subscribe","Service reports an error: "+s,"popupMessageResponseError")},makeGameModule:function(e,s,t,o,n,i){var r,a;return r='<div id="'+("gameid-"+e)+'" class="gameModule thumbnail">',r+='<a href="'+n+'" title="'+(a="Play "+s+" Now!")+'"><img class="thumbnail-img" src="'+o+'" alt="'+s+'"/></a>',r+='<div class="gameModuleInfo"><a href="'+n+'" class="btn btn-md btn-success" role="button" title="'+a+'" alt="'+a+'">Play Now!</a><img class="favorite-button" src="'+(i?"/images/favorite-button-on-196.png":"/images/favorite-button-off-196.png")+'" data-gameid="'+e+'" data-favorite="'+i+'" alt="Add '+s+' to your favorite games" onclick="varynApp.favoriteButtonClicked(this);"></div>',r+='<div class="caption"><a class="gameTitle" href="'+n+'" title="'+a+'"><h3>'+s+'</h3></a><p class="gamedescription">'+t+"</p>",r+="</div></div>"},setFavoriteGameButton:function(e,s){e&&(e.src=s?"/images/favorite-button-on-196.png":"/images/favorite-button-off-196.png",e.dataset.favorite=s?"true":"false")},favoriteButtonClicked:function(e){if(e){var s=parseInt(e.dataset.gameid);if(s){var t="true"==e.dataset.favorite;t?enginesisSession.userFavoriteGamesUnassign(s,(function(o){o.results.result;""!=o.results.status.message||enginesisSession.isUserFavoriteGame(s)||varynApp.setFavoriteGameButton(e,!t)})):enginesisSession.userFavoriteGamesAssign(s,(function(o){o.results.result;""==o.results.status.message&&enginesisSession.isUserFavoriteGame(s)&&varynApp.setFavoriteGameButton(e,!t)}))}}},updateFavoriteGamesInContainer:function(e){var s,t,o,n,i=document.getElementById(e);if(null!=i)for(n=0;n<i.children.length;n++)null!=(t=i.children[n].querySelector("img.favorite-button"))&&(o=parseInt(t.dataset.gameid,10),s=enginesisSession.isUserFavoriteGame(o),this.setFavoriteGameButton(t,s))},makeAdModule:function(){return'<div class="gameModule thumbnail"><div class="row"><div class="col-sm-4 col-md-2 adContainer412"><div id="boxAd300" class="ad300x412">','<iframe src="/common/adModule.html" frameborder="0" scrolling="no" style="width: 300px; height: 412px; overflow: hidden; z-index: 9999; left: 0px; bottom: 0px; display: inline-block;"></iframe></div></div></div></div>','<div class="gameModule thumbnail"><div class="row"><div class="col-sm-4 col-md-2 adContainer412"><div id="boxAd300" class="ad300x412"><iframe src="/common/adModule.html" frameborder="0" scrolling="no" style="width: 300px; height: 412px; overflow: hidden; z-index: 9999; left: 0px; bottom: 0px; display: inline-block;"></iframe></div></div></div></div>'},makeCouponModule:function(){return'<div class="gameModule thumbnail"><div class="row"><div class="col-sm-4 col-md-2 adContainer412"><div id="boxAd300" class="ad300x412">','<iframe src="/common/couponModule.html" frameborder="0" scrolling="no" style="width: 300px; height: 412px; overflow: hidden; z-index: 9999; left: 0px; bottom: 0px; display: inline-block;"></iframe></div></div></div></div>','<div class="gameModule thumbnail"><div class="row"><div class="col-sm-4 col-md-2 adContainer412"><div id="boxAd300" class="ad300x412"><iframe src="/common/couponModule.html" frameborder="0" scrolling="no" style="width: 300px; height: 412px; overflow: hidden; z-index: 9999; left: 0px; bottom: 0px; display: inline-block;"></iframe></div></div></div></div>'},isURL:function(e){return e.startsWith("/")||e.startsWith("http://")||e.startsWith("https://")},gameListGamesResponse:function(e,s,t,o){var n,i,r,a,l,u,d,g=document.getElementById(s),m=0,p=document.location.protocol+"//"+enginesisSession.serverBaseUrlGet()+"/games/",c=enginesisSession.isTouchDevice(),h=[3,21,41,60,80,100];if(null!=e&&e.length>0&&null!=g)for(o&&e.sort(this.compareTitle),(null==t||t<1)&&(t=e.length),i=0,d=h.length,n=0;n<e.length&&m<t;n++)r=e[n],c&&"10"!=r.game_plugin_id&&"9"!=r.game_plugin_id||(m++,u=enginesisSession.isUserFavoriteGame(r.game_id,(function(e){console.log(JSON.stringify(e))})),l=this.makeGameModule(r.game_id,r.title,r.short_desc,p+r.game_name+"/images/300x225.png","/play/?id="+r.game_id,u),(a=document.createElement("div")).className="col-sm-6 col-md-4",a.innerHTML=l,g.appendChild(a),i<d&&n+1==h[i]&&(i++,(a=document.createElement("div")).className="col-sm-6 col-md-4",a.innerHTML=1==i?this.makeCouponModule():this.makeAdModule(),a.id="AdSpot"+i,g.appendChild(a)));return m+i},gameListFavoriteGamesResponse:function(e,s,t,o){for(var n,i,r,a,l=document.getElementById(s),u=0,d=document.location.protocol+"//"+enginesisSession.serverBaseUrlGet()+"/games/",g=enginesisSession.isTouchDevice();null!=l&&l.firstChild;)l.firstChild.remove();if(null!=e&&e.length>0&&null!=l)for(o&&e.sort(this.compareTitle),(null==t||t<1)&&(t=e.length),n=0;n<e.length&&u<t;n++)i=e[n],g&&"10"!=i.game_plugin_id&&"9"!=i.game_plugin_id||(u++,a=this.makeGameModule(i.game_id,i.title,i.short_desc,d+i.game_name+"/images/300x225.png","/play/?id="+i.game_id,!0),(r=document.createElement("div")).className="col-sm-6 col-md-4",r.innerHTML=a,l.appendChild(r));return u},enginesisCallBack:function(e){var s,t,o,n;if(null!=e&&null!=e.fn)switch(s=(o=e.results).status.success,t=o.status.message,0==s&&console.log("Enginesis service error "+t+" from fn "+e.fn),e.fn){case"NewsletterAddressAssign":this.handleNewsletterServerResponse(s,t);break;case"GameListListGames":1==s&&(n=void 0!==o.passthru&&void 0!==o.passthru.game_list_id?o.passthru.game_list_id==siteConfiguration.gameListIdTop?"HomePageTopGames":"HomePageNewGames":"HomePageTopGames",this.gameListGamesResponse(o.result,n,null,null));break;case"UserLoginCoreg":var i=null;void 0!==o.result&&(i=void 0!==o.result.row?o.result.row:o.result),i?document.location.href="/profile/?action=completelogin&network_id="+getNetworkId():varynApp.showInfoMessagePopup("Login","There was a system issue while trying to login or register your account: "+t,0);break;case"RegisteredUserRequestPasswordChange":1==s?varynApp.showInfoMessagePopup("Change Password","A request to change your password has been sent to the email address on file. Please continue the password reset process from the link provided there.",0):(null!=o.status.extended_info&&(t+=" "+o.status.extended_info),varynApp.showInfoMessagePopup("Change Password","There was a system issue while trying to reset your password: "+t,0));break;case"PromotionItemList":1==s?varynApp.showHomePagePromotionModule(o.result):(null!=o.status.extended_info&&(t+=" "+o.status.extended_info),varynApp.showInfoMessagePopup("System error","There was a system issue while trying to load the home page: "+t,0));break;case"UserFavoriteGamesList":if(1==s){var r=varynApp.gameListFavoriteGamesResponse(o.result,"FavoriteGames",null,"title"),a=document.getElementById("FavoriteGamesContainer");null!=a&&(a.style.display=r>0?"block":"none"),varynApp.updateFavoriteGamesInContainer("HomePageTopGames"),varynApp.updateFavoriteGamesInContainer("HomePageNewGames"),varynApp.updateFavoriteGamesInContainer("AllGamesArea"),varynApp.updateFavoriteGamesInContainer("AboutPageHotGames")}break;default:console.log("Unhandled Enginesis reply for "+e.fn)}}}};function getDocumentSize(e){var s=document.getElementById(e),t={fullWidth:document.documentElement.clientWidth,fullHeight:document.documentElement.clientHeight},o=varyn.getEnginesisSession();return null==s&&(s=document.body),null!=s&&(t.containerWidth=s.clientWidth,t.containerHeight=s.clientHeight),null!=o&&(t.gameWidth=o.gameWidth,t.gameHeight=o.gameHeight,t.gameAspectRatio=o.gameAspectRatio),t}var varynAllGamesPage=function(e,s){"use strict";var t=e.getEnginesisSession();return{pageLoaded:function(e){null!=e.search&&e.search.length>0?t.gameFind(e.search,this.enginesisCallBack):t.siteListGames(1,100,2,this.enginesisCallBack)},enginesisCallBack:function(s){var t,o,n;if(null!=s&&null!=s.fn)switch(t=(o=s.results).status.success,o.status.message,s.fn){case"SiteListGames":case"GameFind":1==t&&(n="AllGamesArea",e.gameListGamesResponse(o.result,n,null,"title"))}}}},varynBlogPage=function(e,s){"use strict";var t=e.getEnginesisSession();return{pageLoaded:function(e){t.gameListListGames(s.gameListIdTop,this.enginesisCallBack.bind(this)),t.promotionItemList(s.blogPagePromoId,t.getDateNow(),this.enginesisCallBack.bind(this))},showBlogPagePromotionModule:function(e){var s,t,o,n,i,r;if(null!=(o=document.getElementById("PromoCarousel"))&&null!=e&&e.length>0){for(n=e.length,t=this.makePromoIndicators(n,0),s='<div id="PromoCarouselInner" class="carousel-inner" role="listbox">',r=0;r<n;r++)i=e[r],s+=this.makePromoModule(0==r,i);s+='</div><a class="left carousel-control" href="#PromoCarousel" role="button" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span><span class="sr-only">Previous</span></a><a class="right carousel-control" href="#PromoCarousel" role="button" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span><span class="sr-only">Next</span></a>',o.innerHTML=t+s}else null!=o&&(o.innerText="There are no promotions today.")},enginesisCallBack:function(s){var t,o;if(null!=s&&null!=s.fn)switch(t=(o=s.results).status.success,o.status.message,s.fn){case"NewsletterAddressAssign":e.handleNewsletterServerResponse(t);break;case"PromotionItemList":1==t&&this.showBlogPagePromotionModule(o.result);break;case"GameListListGames":1==t&&e.gameListGamesResponse(o.result,"AboutPageHotGames",15,"plays")}}}},varynApp,debug=!0,manifest=["/common/modernizr.js","/common/jquery.min.js","/common/bootstrap.min.js","/common/ie10-viewport-bug-workaround.js","//platform.twitter.com/widgets.js","https://apis.google.com/js/platform.js"];manifest=debug?manifest.concat(["/common/enginesis.js","/common/ShareHelper.js","/common/commonUtilities.js","/common/ssoFacebook.js","/common/ssoGoogle.js","/common/ssoTwitter.js","/common/ssoApple.js","/common/varyn.js"]):manifest.concat(["/common/enginesis.min.js","/common/ShareHelper.js","/common/varyn.min.js"]),head.load(manifest,(function(){(varynApp=varyn(siteConfiguration)).initApp(varynBlogPage,pageParameters)}));var varynIndexPage=function(e,s){"use strict";var t=e.getEnginesisSession();return{pageLoaded:function(e){t.gameListListGames(s.gameListIdTop,this.enginesisCallBack.bind(this)),t.gameListListGames(s.gameListIdNew,this.enginesisCallBack.bind(this)),t.promotionItemList(s.homePagePromoId,t.getDateNow(),this.enginesisCallBack.bind(this))},createAssetURL:function(e,s){return null!=e&&e.length>1?e.startsWith("/")||e.toLowerCase().startsWith("https:")||e.toLowerCase().startsWith("http:")?e:"//"+t.serverBaseUrlGet()+"/sites/"+t.siteIdGet()+"/promo/"+s+"/"+e:""},showHomePagePromotionModule:function(e){var s,t,o,n,i,r;if(null!=(o=document.getElementById("PromoCarousel"))&&null!=e&&e.length>0){for(n=e.length,t=this.makePromoIndicators(n,0),s='<div id="PromoCarouselInner" class="carousel-inner" role="listbox">',r=0;r<n;r++)i=e[r],s+=this.makePromoModule(0==r,i);s+='</div><a class="left carousel-control" href="#PromoCarousel" role="button" data-slide="prev"><span class="glyphicon glyphicon-chevron-left"></span><span class="sr-only">Previous</span></a><a class="right carousel-control" href="#PromoCarousel" role="button" data-slide="next"><span class="glyphicon glyphicon-chevron-right"></span><span class="sr-only">Next</span></a>',o.innerHTML=t+s}else null!=o&&(o.innerText="There are no promotions today.")},makePromoModule:function(s,t){var o,n=this.createAssetURL(t.promotion_item_img,t.promotion_id),i=(t.promotion_item_title,t.promotion_item_title),r=t.promotion_item_description,a=t.promotion_item_link,l=t.promotion_item_link_title;return o='<div class="item'+(s?" active":"")+'">',o+='<div class="sliderContainer" style="background:url('+n+') center center; background-size:cover;">',o+='<div class="carousel-caption"><h3>'+i+"</h3>",o+='<p class="sliderCaption">'+r+"</p>",e.isURL(a)?o+='<p><a class="btn btn-md btn-primary" href="'+a+'" role="button">'+l+"</a></p>":o+="<p>"+this.makeCallToActionButton(a,l)+"</p>",o+="</div></div></div>"},makeCallToActionButton:function(e,s){return e.indexOf("showSubscribePopup")>=0?'<button type="button" class="btn btn-md btn-danger" data-toggle="modal" data-target="#modal-subscribe" onclick="'+e+'">'+s+"</button>":'<p><a class="btn btn-md btn-primary" href="'+e+'" role="button">'+s+"</a></p>"},makePromoIndicators:function(e,s){var t,o='<ol class="carousel-indicators">';for((void 0===s||null==s||s<0||s>=e)&&(s=0),t=0;t<e;t++)o+='<li data-target="#PromoCarousel" data-slide-to="'+t+'"'+(t==s?' class="active"':"")+"></li>";return o+="</ol>"},enginesisCallBack:function(t){var o,n,i;if(null!=t&&null!=t.fn)switch(o=(n=t.results).status.success,n.status.message,t.fn){case"PromotionItemList":1==o&&this.showHomePagePromotionModule(n.result);break;case"GameListListGames":1==o&&(i=void 0!==n.passthru&&void 0!==n.passthru.game_list_id?n.passthru.game_list_id==s.gameListIdTop?"HomePageTopGames":"HomePageNewGames":"HomePageTopGames",e.gameListGamesResponse(n.result,i,30,null))}}}},varynApp,debug=!0,manifest=["/common/modernizr.js","/common/jquery.min.js","/common/bootstrap.min.js","/common/ie10-viewport-bug-workaround.js","//platform.twitter.com/widgets.js","https://apis.google.com/js/platform.js"];manifest=debug?manifest.concat(["/common/enginesis.js","/common/ShareHelper.js","/common/commonUtilities.js","/common/ssoFacebook.js","/common/ssoGoogle.js","/common/ssoTwitter.js","/common/varyn.js"]):manifest.concat(["/common/enginesis.min.js","/common/ShareHelper.js","/common/varyn.min.js"]),head.load(manifest,(function(){(varynApp=varyn(siteConfiguration)).initApp(varynIndexPage,pageParameters)}));var varynPlayPage=function(e,s){"use strict";function t(){var e,s,t;s=window.innerWidth,t=window.innerHeight,null!=(e=document.getElementById("gameContainer-iframe"))&&(e.style.width=s+"px",e.style.maxWidth=s+"px",e.style.height=t+"px",e.style.maxHeight=t+"px"),null!=(e=document.getElementById("gameContainer"))&&(e.style.width=s+"px",e.style.maxWidth=s+"px",e.style.height=t+"px",e.style.maxHeight=t+"px"),null!=(e=document.getElementById("topContainer"))&&(e.style.margin="0",e.style.padding="0",e.style.top="0",e.style.left="0",e.style.width=s+"px",e.style.maxWidth=s+"px",e.style.height=t+"px",e.style.maxHeight=t+"px"),null!=(e=document.body)&&(e.style.margin="0",e.style.padding="0",e.style.top="0",e.style.left="0",e.style.width=s+"px",e.style.maxWidth=s+"px",e.style.height=t+"px",e.style.maxHeight=t+"px")}function o(){t(),window.location.reload()}function n(e,s){var o,n=document.getElementById("gameContainer"),i=document.getElementById("gameContainer-iframe"),r=e.width,a=e.height,l=e.pluginId,u=s.isTouchDevice(),d=n.getBoundingClientRect();if(o=a<r?a/r:r/a,s.gameWidth=r,s.gameHeight=a,s.gameAspectRatio=o,s.gamePluginId=l,null!=n)if(u)!function(e){var s,o,n,i=["varyn-navbar","playgame-InfoPanel","playgame-BottomPanel"];n=e?"none":"block";for(s in i)null!=(o=document.getElementById(i[s]))&&(o.style.display=n);null!=(o=document.getElementById("varyn-body"))&&(o.style.padding="0",o.style.margin="0");t()}(!0);else if(9==s.gamePluginId)n.style["overflow-y"]="scroll",n.style["overflow-x"]="hidden",n.style["-webkit-overflow-scrolling"]="touch";else if(10==s.gamePluginId){var g=n.width,m=window.innerHeight-d.top;null!=i&&(i.style.width=g+"px",i.style.maxWidth=g+"px",i.style.height=m+"px",i.style.maxHeight=m+"px"),n.style.width=g+"px",n.style.maxWidth=g+"px",n.style.height=m+"px",n.style.maxHeight=m+"px"}else n.style.height=a+"px",n.style.maxHeight=a+"px";null!=i&&window.setTimeout((function(){i.contentWindow.focus()}),150)}function i(s){var t,o,n,i,r;if(null!=s&&null!=s.fn)if(t="1"==(n=s.results).status.success)switch(s.fn){case"NewsletterAddressAssign":handleNewsletterServerResponse(t);break;case"DeveloperGet":i=s.results.result[0],null!=(r=document.getElementById("gameDeveloper"))&&(null!=i.logo_img_url&&""!=i.logo_img_url?r.innerHTML='<h4>Developed By:</h4><p><a href="'+i.web_site_url+'" target="_new"><img src="//www.enginesis.com'+i.logo_img_url+'" width=100 height=50 style="margin-right: 20px;"/></a></p>':r.innerHTML='<h4>Developed By:</h4><p><a href="'+i.web_site_url+'" target="_new">'+i.organization_name+"</a></p>");break;case"SiteListGamesRandom":e.gameListGamesResponse(s.results.result,"PlayPageGamesArea",9,"title")}else o=n.status.message+": "+n.status.extended_info,console.log("Error "+o+" from Enginesis service call "+s.fn)}return{pageLoaded:function(t){var r=s.gameId;s.serverStage;gtag("game","request",r);var a=e.getEnginesisSession();a.siteListGamesRandom(24,i),a.developerGet(t.developerId,i),n(t,a),a.isTouchDevice()&&window.addEventListener("orientationchange",o,!1)}}},varynProfilePage=function(e,s){"use strict";var t=e.getEnginesisSession(),o="",n="";function i(){var e=commonUtilities.loadObjectWithKey("VarynSecurityInfo");null==e?t.registeredUserSecurityGet(r):($("#register_form_new_password").val(""),$("#register_form_question").val(e.security_question),$("#register_form_answer").val(e.security_answer),$('a[data-toggle="tab"]').off("shown.bs.tab"))}function r(s){var t,o,n;if(null!=s&&null!=s.fn)switch(t=(n=s.results).status.success,o=n.status.message,s.fn){case"GameListListGames":1==t&&e.gameListGamesResponse(n.result,"ProfilePageTopGames",null,"title");break;case"RegisteredUserSecurityGet":1==t&&(commonUtilities.saveObjectWithKey("VarynSecurityInfo",n.result[0]),i());break;case"RegisteredUserRequestPasswordChange":1==t?e.showInfoMessagePopup("Change Password","A request to change your password has been sent to the email address on file. Please continue the password reset process from the link provided there.",0):(null!=n.status.extended_info&&(o+=" "+n.status.extended_info),e.showInfoMessagePopup("Change Password","There was a system issue while trying to reset your password: "+o,0));break;case"UserFavoriteGamesList":if(1==t){var r=e.gameListFavoriteGamesResponse(n.result,"FavoriteGames",null,"title"),a=document.getElementById("FavoriteGamesContainer");null!=a&&(a.style.display=r>0?"block":"none")}}}return{pageLoaded:function(i){void 0!==i.errorFieldId&&(o=i.errorFieldId),void 0!==i.inputFocusId&&(n=i.inputFocusId);var r=commonUtilities.queryStringToObject(null);null!=r&&null!=r.action&&"update"==r.action&&this.onPageLoadSetTabEvents(),t.isUserLoggedIn()?t.userFavoriteGamesList(this.enginesisCallBack):this.setupUserLogin(),e.isLogout()&&this.enableLoginButtons(!1),this.setupUserNameChangeHandler(),t.gameListListGames(s.gameListIdTop,this.enginesisCallBack),this.onPageLoadSetFocus(),window.onunload=this.updateCleanup.bind(this)},setupUserLogin:function(){document.getElementById("profile_forgot_password")&&document.getElementById("profile_forgot_password").addEventListener("click",this.forgotPassword.bind(this)),document.getElementById("facebook-connect-button")&&document.getElementById("facebook-connect-button").addEventListener("click",this.loginFacebook.bind(this)),document.getElementById("twitter-signin-button")&&document.getElementById("twitter-signin-button").addEventListener("click",this.loginTwitter.bind(this)),ssoGoogle.setLoginCallback(e.registerSSO.bind(e))},enableLoginButtons:function(e){null==e&&(e=!0);var s=!e;return document.getElementById("profile_register_now")&&(document.getElementById("profile_register_now").disabled=s),document.getElementById("login-button")&&(document.getElementById("login-button").disabled=s),document.getElementById("facebook-connect-button")&&(document.getElementById("facebook-connect-button").disabled=s),document.getElementById("twitter-signin-button")&&(document.getElementById("twitter-signin-button").disabled=s),document.getElementById("gapi-signin-button")&&(document.getElementById("gapi-signin-button").disabled=s),e},setupUserNameChangeHandler:function(){$("#register_form_username").on("change",e.onChangeRegisterUserName.bind(e)),$("#register_form_username").on("input",e.onChangeRegisterUserName.bind(e)),$("#register_form_username").on("propertychange",e.onChangeRegisterUserName.bind(e)),e.setupRegisterUserNameOnChangeHandler(),e.onChangeRegisterUserName($("#register_form_username").get(0),"register_user_name_unique");var s=document.getElementById("register_form_email");null!=s&&(s.addEventListener("change",e.onChangeEmail.bind(e)),s.addEventListener("input",e.onChangeEmail.bind(e)))},onClickShowPassword:function(e){var s=document.getElementById("register_form_showpassword"),t=document.getElementById("register_form_password"),o=document.getElementById("register_form_showpassword_icon"),n=document.getElementById("register_form_showpassword_label");null!=s&&(s.checked?(s.checked=!1,t.type="password",o.className="glyphicon glyphicon-eye-open",n.innerText="Show"):(s.checked=!0,t.type="text",o.className="glyphicon glyphicon-eye-close",n.innerText="Hide"))},onPageLoadSetFocus:function(){var e;""!=n&&null!=(e=document.getElementById(n))&&e.focus(),""!=o&&$("#"+o).removeClass("popup-form-input").addClass("popup-form-input-error")},onPageLoadSetTabEvents:function(){$('a[data-toggle="tab"]').on("shown.bs.tab",(function(e){"secure-info"==e.target.id&&i()}))},loginValidation:function(){var s=$("input[name=login_form_username]").val(),t=$("input[name=login_form_password]").val(),o="",n="";$("#login_form_username").removeClass("popup-form-input-error").addClass("popup-form-input"),$("#login_form_password").removeClass("popup-form-input-error").addClass("popup-form-input"),e.showErrorMessage("",""),""!=o||e.isValidUserName(s)||(o="User name is not acceptable. Please enter your user name.",n="login_form_username"),""!=o||e.isValidPassword(t)||(o="Password is not acceptable, at least 4 characters. Please retry your password.",n="login_form_password"),""==o?document.getElementById("login").submit():e.showErrorMessage(o,n)},registerFormValidation:function(){var s=$("input[name=register_form_username]").val(),t=$("input[name=register_form_password]").val(),o=$("input[name=register_form_email]").val(),n=$("input[name=register_form_dob]").val(),i=$("input[name=register_form_agreement]").val()>1,r="",a="";return $("#register_form_username").removeClass("popup-form-input-error").addClass("popup-form-input"),$("#register_form_password").removeClass("popup-form-input-error").addClass("popup-form-input"),$("#register_form_email").removeClass("popup-form-input-error").addClass("popup-form-input"),e.showErrorMessage("",""),""!=r||e.isValidUserName(s)||(r="User name is not acceptable. Please enter your user name.",a="register_form_username"),""!=r||e.isValidPassword(t)||(r="Password is not acceptable, at least 4 characters. Please retry your password.",a="register_form_password"),""!=r||e.isValidEmail(o)||(r="Email "+o+" doesn't look right. Please enter a proper email address.",a="register_form_email"),""!=a||e.isValidDateOfBirth(n)||(r="You must be at least 13 years of age to register an account on this site.",a="register_form_dob"),""!=a||i||(r="You must agree with the terms of service or you cannot register.",a="register_form_agreement"),""!=r&&e.showErrorMessage(r,a),""==r},updateFormValidation:function(){var s=$("input[name=register_form_username]").val(),t=$("input[name=register_form_email]").val(),o=$("input[name=register_form_dob]").val(),n="",i="";return $("#register_form_username").removeClass("popup-form-input-error").addClass("popup-form-input"),$("#register_form_email").removeClass("popup-form-input-error").addClass("popup-form-input"),e.showErrorMessage("",""),""!=n||e.isValidUserName(s)||(n="User name is not acceptable. Please enter your user name.",i="register_form_username"),""==n&&e.isChangedUserName(s)&&!e.testUserNameIsUnique("register_user_name_unique")&&(n="User name is in use by someone else. Please select a unique user name.",i="register_form_username"),""!=n||e.isValidEmail(t)||(n="Email "+t+" doesn't look right. Please enter a proper email address.",i="register_form_email"),""!=i||e.isValidDateOfBirth(o)||(n="You must be at least 13 years of age to register an account on this site.",i="register_form_dob"),""!=n&&e.showErrorMessage(n,i),""==n},logout:function(){window.location.href="/profile/?action=logout"},logoutComplete:function(){this.enableLoginButtons(!0)},cancelUpdate:function(e){return this.updateCleanup(),window.location.href="/profile/?action=cancel",e.preventDefault(),!1},startUpdate:function(){this.updateCleanup(),window.location.href="/profile/?action=update"},updateCleanup:function(){commonUtilities.removeObjectWithKey("VarynSecurityInfo")},sendPasswordResetRequest:function(){return!t.registeredUserRequestPasswordChange(this.enginesisCallBack)},forgotPassword:function(){e.showForgotPasswordPopup(!0)},changePassword:function(){var s="",t=!1;null!=e.getVarynUserInfo()?(t=this.sendPasswordResetRequest())&&(s="We are not able to generate a password reset on your behalf. Please contact our support channel."):(t=!0,s="You must be logged in to reset your password."),t&&e.showInfoMessagePopup("Change Password",s,0)},showRegistrationPopup:function(){e.showRegistrationPopup(!0)},popupRegistrationClicked:function(){e.showRegistrationPopup(!1)},loginFacebook:function(){return e.trackEvent("login","sso","facebook"),ssoFacebook.login(e.ssoFacebookParameters(),e.registerSSO.bind(e)),!0},loginTwitter:function(){return e.trackEvent("login","sso","twitter"),ssoTwitter.login(e.ssoTwitterParameters()),!0},loginApple:function(){return e.trackEvent("login","sso","apple"),ssoApple.login(e.ssoAppleParameters()),!0}}},varynResetPasswordPage=function(e,s){"use strict";var t=e.getEnginesisSession(),o="",n="";return{pageLoaded:function(e){void 0!==e.errorFieldId&&(o=e.errorFieldId),void 0!==e.inputFocusId&&(n=e.inputFocusId),this.setupPasswordChangeHandler(),this.onPageLoadSetFocus()},setupPasswordChangeHandler:function(){$("#newPassword").on("change",this.passwordChangeHandler.bind(this)),$("#newPassword").on("input",this.passwordChangeHandler.bind(this)),$("#newPassword").on("propertychange",this.passwordChangeHandler.bind(this)),$("#retypePassword").on("change",this.passwordChangeHandler.bind(this)),$("#retypePassword").on("input",this.passwordChangeHandler.bind(this)),$("#retypePassword").on("propertychange",this.passwordChangeHandler.bind(this)),this.passwordChangeHandler()},onPageLoadSetFocus:function(){""!=n&&document.getElementById(n).focus(),""!=o&&$("#"+o).removeClass("popup-form-input").addClass("popup-form-input-error")},passwordChangeHandler:function(){var e=document.getElementById("newPassword").value,s=document.getElementById("password-match"),o=document.getElementById("reset-password-button");t.isValidPassword(e)?(s.classList.remove("password-no-match"),s.classList.add("password-match"),s.style.display="inline-block",o.classList.remove("disabled")):(s.classList.remove("password-match"),s.classList.add("password-no-match"),s.style.display="inline-block",o.classList.add("disabled"))}}};