var varyn=function(parameters){"use strict";var siteConfiguration={debug:!0,originWhiteList:["www.enginesis.com","games.enginesis.com","metrics.enginesis.com","www.enginesis-l.com","games.enginesis-l.com","metrics.enginesis-l.com","www.enginesis-q.com","games.enginesis-q.com","metrics.enginesis-q.com"],varynUserInfoCookieName:"varynuser",userInfoKey:"varynuserinfo",developerKey:parameters.developerKey,siteId:parameters.siteId,gameId:parameters.gameId,serverStage:parameters.serverStage,serverHostDomain:"varyn"+parameters.serverStage+".com",languageCode:parameters.languageCode,gameGroupId:parameters.gameGroupId||0,gameListIdTop:parameters.gameListIdTop||4,gameListIdNew:parameters.gameListIdNew||5,homePagePromoId:parameters.homePagePromoId||3,blogPagePromoId:parameters.blogPagePromoId||4,gameListState:1,userInfo:parameters.userInfo,authToken:parameters.authToken,minPasswordLength:4,minUserNameLength:3,minimumAge:13,ssoParameters:parameters},unconfirmedNetworkId=1,currentPage="",waitingForUserNameReply=!1,domImage,enginesisSession=window.enginesis,pageViewParameters=null,_isLogout=!1;function getNetworkId(){return void 0!==siteConfiguration.userInfo&&null!=siteConfiguration.userInfo&&void 0!==siteConfiguration.userInfo.networkId?siteConfiguration.userInfo.networkId:unconfirmedNetworkId}function getVarynUserInfoFromCookie(){var e=commonUtilities.cookieGet(siteConfiguration.varynUserInfoCookieName);return null!=e&&""!=e?JSON.parse(e):null}function getSavedUserInfo(){var e=commonUtilities.loadObjectWithKey(siteConfiguration.userInfoKey);return"string"==typeof e?enginesis.queryStringToObject(e):e}function saveUserInfo(e){return commonUtilities.saveObjectWithKey(siteConfiguration.userInfoKey,e)}function clearSavedUserInfo(){return commonUtilities.removeObjectWithKey(siteConfiguration.userInfoKey)}return{initApp:function(e,s){var o={siteId:siteConfiguration.siteId,gameId:siteConfiguration.gameId||0,gameGroupId:siteConfiguration.gameGroupId||0,serverStage:"enginesis."+siteConfiguration.serverHostDomain,authToken:siteConfiguration.authToken||"",developerKey:siteConfiguration.developerKey,languageCode:this.parseLanguageCode(siteConfiguration.languageCode),callBackFunction:this.enginesisCallBack.bind(this)},t=null;return _isLogout=s.isLogout,currentPage=this.getCurrentPage(),pageViewParameters=s,enginesis.init(o),null!=pageViewParameters&&void 0!==pageViewParameters.showSubscribe&&"1"==pageViewParameters.showSubscribe&&varynApp.showSubscribePopup(),void 0!==e&&null!=e&&(t=e(varynApp,siteConfiguration)).pageLoaded(pageViewParameters),_isLogout?this.logout().then((function(){void 0!==t.logoutComplete&&t.logoutComplete()})):this.checkIsUserLoggedIn(),t},trackEvent:function(e,s,o){"function"==typeof gtag&&gtag({category:e,action:s,data:o})},saveRefreshToken:function(e){null!=enginesisSession&&enginesisSession.saveRefreshToken(e)},getVarynUserInfo:function(){var e=siteConfiguration.userInfo;return null==e&&null==(e=commonUtilities.loadObjectWithKey(siteConfiguration.userInfoKey))&&(e=getVarynUserInfoFromCookie()),e},getEnginesisSession:function(){return enginesisSession},getSiteConfiguration:function(){return siteConfiguration},isLogout:function(){return _isLogout},parseLanguageCode:function(e){return e.substr(0,2)},isValidEmail:function(e){return/\S+@\S+\.\S+/.test(e)},isValidUserName:function(e){return/^[a-zA-Z0-9_@!~\$\.\-\|\s?]{3,20}$/.test(e)},isChangedUserName:function(e){var s=siteConfiguration.userInfo;return null==s&&(s=this.getVarynUserInfo()),!(null!=s&&s.user_name==e)},isChangedUserInfoField:function(e,s){var o,t=!1,n=null,i=null;return void 0!==siteConfiguration.userInfo&&null!=siteConfiguration.userInfo&&void 0!==siteConfiguration.userInfo[e]&&(n=siteConfiguration.userInfo[e]),null!=(o=document.getElementById(s))&&(i=o.value),null!=n&&null!=i&&(t=n!=i),t},isValidPassword:function(e){var s=e.trim().length;return s>=siteConfiguration.minPasswordLength&&s==e.length},ageInYearsFromNow:function(e){var s,o,t=new Date,n=new Date(e);return isNaN(n.getFullYear())&&(n=t),s=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate()),o=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),Math.floor((o-s)/31536e6)},isValidDateOfBirth:function(e){return this.ageInYearsFromNow(e)>=siteConfiguration.minimumAge},mysqlDateToHumanDate:function(e){var s,o,t=new Date(e);return null==t&&(t=new Date),(s=t.getHours()%12)<1&&(s="12"),(o=t.getMinutes()%12)<10&&(o="0"+o),t.toDateString()+" "+s+":"+o+" "+(t.getHours()>11?"PM":"AM")},commaGroupNumber:function(e){return"Number"!=typeof e&&(e=Number(e)),e.toLocaleString()},getCurrentPage:function(){var e=location.href.split("/").slice(-1);return e.indexOf(".")>0?e=e.split(".").slice(0):""==e&&(e="index"),e.toString()},showErrorMessage:function(e,s){var o=document.getElementById("errorContent"),t=document.getElementById(s);""==e?o.innerHTML="<p>&nbsp;</p>":null!=o&&(o.innerHTML='<p class="text-error">'+e+"</p>"),null!=t&&($(t).removeClass("popup-form-input").addClass("popup-form-input-error"),t.focus())},setElementSizeAndColor:function(e,s,o,t){var n="margin: 0; padding: 0; left: 0; top: 0; width: "+s+"px; height: "+o+"px; min-height: "+o+"px !important; overflow: hidden;";null!=t&&""!=t&&(n+=" background-color: "+t+";"),e.setAttribute("style",n)},checkChildLayout:function(e){var s,o,t,n=e.children;for(s=0;s<n.length;s++)t=null!=(o=n[s]).name?o.name:null!=o.id?o.id:o.localName,console.log(e.localName+": Child "+t+" ("+o.style.width+","+o.style.height+")")},compareTitle:function(e,s){return e.title<s.title?-1:e.title>s.title?1:0},compareDate:function(e,s,o){return e[o]<s[o]?1:e[o]>s[o]?-1:0},insertAndExecute:function(id,text){document.getElementById(id).innerHTML=text;for(var scripts=document.getElementById(id).getElementsByTagName("script"),i=0;i<scripts.length;i++)if(""!=scripts[i].src){var tag=document.createElement("script");tag.src=scripts[i].src,document.getElementsByTagName("head")[0].appendChild(tag)}else eval(scripts[i].innerHTML)},checkBrowserCORSCompatibility:function(){return void 0!==window.postMessage},verifyCORSWhiteList:function(e){for(var s=!1,o=0;o<siteConfiguration.originWhiteList.length;o++)if(e===siteConfiguration.originWhiteList[o]){s=!0;break}return s},hideSubscribePopup:function(){this.showSubscribePopup(!1)},showSubscribePopup:function(e){e?(document.getElementById("subscribe-email").value=enginesisSession.anonymousUserGetSubscriberEmail(),this.setPopupMessage("modal-subscribe","",null),this.trackEvent("subscribe","prompt",currentPage)):$("#modal-subscribe").modal("hide")},showRegistrationPopup:function(e){e?($("#modal-register").modal("show"),this.setPopupMessage("modal-register","",null),this.onChangeRegisterUserName(document.getElementById("register-username"),"popup_user_name_unique"),this.trackEvent("register","prompt",currentPage)):$("#modal-register").modal("hide")},showLoginPopup:function(e){e?($("#modal-login").modal("show"),this.setPopupMessage("modal-login","",null),this.trackEvent("login","prompt",currentPage)):$("#modal-login").modal("hide")},showForgotPasswordPopup:function(e){var s=document.getElementById("modal-forgot-password");null!=s&&(e?(s.modal("show"),this.setPopupMessage("modal-forgot-password","",null),this.trackEvent("forgotpassword","prompt",currentPage)):s.modal("hide"))},setPopupMessage:function(e,s,o){var t="modalMessageArea",n=$("#"+e).find("."+t);null!=n&&(n.css("display","block"),n.text(s),null!=o&&n.attr("class",t+" "+o))},popupCloseClicked:function(){this.closeInfoMessagePopup(),this.showSubscribePopup(!1),this.showLoginPopup(!1),this.showRegistrationPopup(!1),this.showForgotPasswordPopup(!1)},showInfoMessagePopup:function(e,s,o){var t=document.getElementById("infoMessageTitle"),n=document.getElementById("infoMessageArea");t.innerText=e,n.innerHTML=s,$("#modal-message").modal("show"),o>0&&window.setTimeout(this.closeInfoMessagePopup.bind(this),o)},closeInfoMessagePopup:function(){$("#modal-message").modal("hide")},popupSubscribeClicked:function(){var e=document.getElementById("subscribe-email").value,s="";return this.isValidEmail(e)?(this.setPopupMessage("modal-subscribe","Subscribing "+e+" with the service...","popupMessageResponseOK"),enginesisSession.anonymousUserSetSubscriberEmail(e),enginesisSession.newsletterAddressAssign(e,"","","2",null),this.trackEvent("subscribe","submit",currentPage)):(s="subscribe-email",this.setPopupMessage("modal-subscribe","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),document.getElementById(s).focus()),""==s},popupRegistrationClicked:function(){var e=document.getElementById("register-email").value,s=document.getElementById("register-password").value,o=document.getElementById("register-username").value,t=document.getElementById("register-agreement").value,n="";return""!=n||this.isValidEmail(e)||(this.setPopupMessage("modal-register","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),n="register-email"),""!=n||this.isValidUserName(o)||(this.setPopupMessage("modal-register","Your user name "+o+" looks bad. Can you try again?","popupMessageResponseError"),n="register-username"),""!=n||this.testUserNameIsUnique("popup_user_name_unique")||(this.setPopupMessage("modal-register","Your user name "+o+" is in use by another user. Please pick a unique user name.","popupMessageResponseError"),n="register-username"),""!=n||this.isValidPassword(s)||(this.setPopupMessage("modal-register","Your password looks bad. Can you try again?","popupMessageResponseError"),n="register-password"),""==n&&t<2&&(this.setPopupMessage("modal-register","You must agree with the terms of use or you cannot register.","popupMessageResponseError"),n="register-agreement"),""!=n&&($(n).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(n).focus()),""==n&&(document.getElementById("registration-form").submit(),this.trackEvent("register","submit",currentPage)),""==n},popupLoginClicked:function(){var e=document.getElementById("login_password").value.toString(),s=document.getElementById("login_username").value.toString(),o="";return""!=o||this.isValidUserName(s)||(this.setPopupMessage("modal-login","Your user name "+s+" looks bad. Can you try again?","popupMessageResponseError"),o="login_username"),""!=o||this.isValidPassword(e)||(this.setPopupMessage("modal-login","Your password looks bad. Can you try again?","popupMessageResponseError"),o="login_password"),""!=o&&($(o).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(o).focus()),""==o&&(document.getElementById("login-form").submit(),this.trackEvent("login","submit",currentPage)),""==o},popupForgotPasswordClicked:function(){var e=document.getElementById("forgotpassword_email").value.toString(),s=document.getElementById("forgotpassword_username").value.toString(),o="";return""!=o||this.isValidUserName(s)||(this.setPopupMessage("modal-forgot-password","Your user name '"+s+"' looks bad. Can you try again?","popupMessageResponseError"),o="forgotpassword_username"),""!=o||this.isValidEmail(e)||(this.setPopupMessage("modal-forgot-password","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),o="forgotpassword_email"),""!=o&&($(o).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(o).focus()),""==o&&(document.getElementById("forgot-password-form").submit(),this.trackEvent("forgotpassword","submit",currentPage)),""==o},formForgotPasswordClicked:function(){var e=document.getElementById("forgotpassword_email_form").value.toString(),s=document.getElementById("forgotpassword_username_form").value.toString(),o="";return""!=o||this.isValidUserName(s)||(this.setPopupMessage("forgot-password-form","Your user name '"+s+"' looks bad. Can you try again?","popupMessageResponseError"),o="forgotpassword_username"),""!=o||this.isValidEmail(e)||(this.setPopupMessage("forgot-password-form","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),o="forgotpassword_email"),""!=o&&($(o).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(o).focus()),""==o},formUnsubscribeClicked:function(){var e=document.getElementById("unsubscribe_email_form").value.toString(),s="";return this.isValidEmail(e)||(this.setPopupMessage("unsubscribe-form","Your email "+e+" looks bad. Can you try again?","popupMessageResponseError"),s="unsubscribe_email_form"),""!=s&&($(s).removeClass("popup-form-input").addClass("popup-form-input-error"),document.getElementById(s).focus()),""==s},onClickShowPassword:function(e){var s=document.getElementById("register-showpassword"),o=document.getElementById("register-password"),t=document.getElementById("register-showpassword-icon"),n=document.getElementById("register-showpassword-text");null!=s&&(null==o&&(o=document.getElementById("newPassword")),"text"==o.type?(s.checked=!1,o.type="password",t.className="glyphicon glyphicon-eye-open",n.innerText="Show"):(s.checked=!0,o.type="text",t.className="glyphicon glyphicon-eye-close",n.innerText="Hide"))},registerSSO:function(e,s){if(_isLogout||null==e||null==e){if(_isLogout){ssoGoogle.logout((function(){console.log("Google user is logged out")}))}}else(void 0===s||null===s&&void 0!==e.networkId)&&(s=e.networkId),unconfirmedNetworkId=s,varynApp.trackEvent("login-complete","sso",varynApp.networkIdToString(s)),enginesisSession.userLoginCoreg(e,s,null)},checkIsUserLoggedIn:function(){enginesisSession.isUserLoggedIn()?this.checkLoggedInSSO(enginesis.networkId).then(this.loginSSOSucceeded,this.loginSSOFailed):this.loadAllSupportedNetworks().length>0||this.loginSSOFailed(null)},loadAllSupportedNetworks:function(){var e=enginesisSession.supportedSSONetworks(),s=[];for(var o in e)e.hasOwnProperty(o)&&"Enginesis"!=o&&(s.push(e[o]),this.loadSupportedNetwork(e[o]));return s},logout:function(){var e=this,s=enginesis.networkId;return new Promise((function(o,t){clearSavedUserInfo(),e.logoutSSO(s,(function(){e.checkIsUserLoggedIn(),o()}))}))},networkIdToString:function(e){var s=null;switch(e){case enginesis.supportedNetworks.Enginesis:s="Enginesis";break;case enginesis.supportedNetworks.Facebook:s="Facebook";break;case enginesis.supportedNetworks.Google:s="Google";break;case enginesis.supportedNetworks.Twitter:s="Twitter"}return s},loadSupportedNetwork:function(e){switch(e){case enginesis.supportedNetworks.Enginesis:break;case enginesis.supportedNetworks.Facebook:"undefined"!=typeof ssoFacebook&&ssoFacebook.load(this.ssoFacebookParameters());break;case enginesis.supportedNetworks.Google:"undefined"!=typeof ssoGoogle&&ssoGoogle.load(this.ssoGoogleParameters());break;case enginesis.supportedNetworks.Twitter:"undefined"!=typeof ssoTwitter&&ssoTwitter.load(this.ssoTwitterParameters());break;case enginesis.supportedNetworks.Apple:"undefined"!=typeof ssoApple&&ssoApple.load(this.ssoAppleParameters())}},checkIsUserLoggedInNetworkId:function(e,s){var o=this;e.length>s?o.checkLoggedInSSO(e[s]).then((function(t){null==t||t instanceof Error?(s++,o.checkIsUserLoggedInNetworkId(e,s)):o.loginSSOSucceeded(t)}),(function(){s++,o.checkIsUserLoggedInNetworkId(e,s)})):o.loginSSOFailed(new Error("User is not logged in after checking "+s+" networks."))},loginSSOSucceeded:function(e){null!=pageViewParameters&&void 0!==pageViewParameters.userInfo&&""!=pageViewParameters.userInfo?(siteConfiguration.userInfo=JSON.parse(pageViewParameters.userInfo),saveUserInfo(siteConfiguration.userInfo)):(siteConfiguration.userInfo=getSavedUserInfo(),siteConfiguration.userInfo)},loginSSOFailed:function(e){enginesisSession.isUserLoggedIn()||e&&(e instanceof Error?console.log("Error from varyn.loginSSOFailed: "+e.message):"string"==typeof e?console.log("Error from varyn.loginSSOFailed: "+e):console.log("Error from varyn.loginSSOFailed: "+e.toString()))},checkLoggedInSSO:function(e){var s=this;return new Promise((function(o,t){switch(e){case enginesis.supportedNetworks.Enginesis:enginesisSession.isUserLoggedIn()?o(enginesis.getLoggedInUserInfo()):t(null);break;case enginesis.supportedNetworks.Facebook:ssoFacebook&&ssoFacebook.loadThenLogin(s.ssoFacebookParameters()).then(o,t);break;case enginesis.supportedNetworks.Google:ssoGoogle&&ssoGoogle.loadThenLogin(s.ssoGoogleParameters()).then(o,t);break;case enginesis.supportedNetworks.Twitter:ssoTwitter&&ssoTwitter.loadThenLogin(s.ssoTwitterParameters()).then(o,t);break;case enginesis.supportedNetworks.Apple:ssoApple&&ssoApple.loadThenLogin(s.ssoAppleParameters()).then(o,t);break;default:t(Error("Network "+e+" is not handled with SSO."))}}))},loginSSO:function(e,s){if(_isLogout||null==e||null==e){if(_isLogout){ssoGoogle.logout((function(){console.log("Google user is logged out")}))}}else unconfirmedNetworkId=s,enginesisSession.userLoginCoreg(e,s,null)},logoutSSO:function(e,s){switch(e){case enginesis.supportedNetworks.Enginesis:void 0!==s&&null!=s&&s();break;case enginesis.supportedNetworks.Facebook:"undefined"!=typeof ssoFacebook&&ssoFacebook.logout(s);break;case enginesis.supportedNetworks.Google:"undefined"!=typeof ssoGoogle&&ssoGoogle.logout(s);break;case enginesis.supportedNetworks.Twitter:"undefined"!=typeof ssoTwitter&&ssoTwitter.logout(s);break;case enginesis.supportedNetworks.Apple:"undefined"!=typeof ssoApple&&ssoApple.logout(s)}},ssoStatusCallback:function(e,s){switch(e){case enginesis.supportedNetworks.Facebook:FB.getLoginStatus(varynApp.facebookStatusChangeCallback);break;case enginesis.supportedNetworks.Google:null!=s&&(s.isSignedIn.get()?console.log("Gplus user is signed in"):console.log("Gplus user is NOT signed in"));break;case enginesis.supportedNetworks.Twitter:break;default:console.log("varynApp.checkLoginStateSSO unsupported network "+e)}},ssoFacebookParameters:function(){return{networkId:enginesis.supportedNetworks.Facebook,applicationId:siteConfiguration.ssoParameters.facebookAppId}},ssoGoogleParameters:function(){return{networkId:enginesis.supportedNetworks.Google,applicationId:siteConfiguration.ssoParameters.googleAppId}},ssoTwitterParameters:function(){return{networkId:enginesis.supportedNetworks.Twitter,applicationId:siteConfiguration.ssoParameters.twitterAppId}},ssoAppleParameters:function(){return{networkId:enginesis.supportedNetworks.Apple,applicationId:siteConfiguration.ssoParameters.appleAppId}},setKeyboardListeners:function(){},keyboardListener:function(e){e&&e.key&&"?"==e.key&&(this.setFocusToSearchInput(),e.preventDefault())},setFocusToSearchInput:function(){var e=document.getElementsByName("q");e&&e.length>0&&((e=e[0]).focus(),e.value="")},setupRegisterUserNameOnChangeHandler:function(){var e=document.getElementById("register-username");null!=e&&(e.addEventListener("change",this.onChangeRegisterUserName.bind(this)),e.addEventListener("input",this.onChangeRegisterUserName.bind(this)),e.addEventListener("propertychange",this.onChangeRegisterUserName.bind(this)))},onChangeRegisterUserName:function(e,s){var o;waitingForUserNameReply||null==e||(null!=e.target&&(e=e.target),null==s&&(s=$(e).data("target")),o=e.value.toString(),varynApp.isChangedUserName(o)?o&&varynApp.isValidUserName(o)?(waitingForUserNameReply=!0,domImage=s,enginesisSession.userGetByName(o,varynApp.onChangeRegisteredUserNameResponse.bind(varynApp))):this.setUserNameIsUnique(s,!1):this.setUserNameIsUnique(s,!0))},onChangeRegisteredUserNameResponse:function(e){var s=!1;waitingForUserNameReply=!1,null!=e&&null!=e.fn&&(s="1"==e.results.status.success),this.setUserNameIsUnique(domImage,!s),domImage=null},setUserNameIsUnique:function(e,s){if(e){var o=document.getElementById(e);null!=o&&(s?(o.classList.remove("username-is-not-unique"),o.classList.add("username-is-unique"),o.style.display="inline-block"):(o.classList.remove("username-is-unique"),o.classList.add("username-is-not-unique"),o.style.display="inline-block"))}},testUserNameIsUnique:function(e){return $("#"+e).hasClass("username-is-unique")},onChangeEmail:function(e){if(e&&e.target){var s=e.target,o=!1;"change"==e.type&&(this.isValidEmail(s.value)||(this.showErrorMessage("Your email "+s.value+" looks bad. Can you try again?",s.id),o=!0)),o||(s.classList.remove("popup-form-input-error"),s.classList.add("popup-form-input"),this.showErrorMessage("",null))}},handleNewsletterServerResponse:function(e,s){1==e?(this.setPopupMessage("modal-subscribe","You are subscribed - Thank you!","popupMessageResponseOK"),window.setTimeout(this.hideSubscribePopup.bind(this),2500)):this.setPopupMessage("modal-subscribe","Service reports an error: "+s,"popupMessageResponseError")},makeGameModule:function(e,s,o,t,n,i){var r,a;return r='<div id="'+("gameid-"+e)+'" class="gameModule thumbnail">',r+='<a href="'+n+'" title="'+(a="Play "+s+" Now!")+'"><img class="thumbnail-img" src="'+t+'" alt="'+s+'" loading="lazy" width="300" height="225" /></a>',r+='<div class="gameModuleInfo"><a href="'+n+'" class="btn btn-md btn-success" role="button" title="'+a+'" alt="'+a+'">Play Now!</a><img class="favorite-button" src="'+(i?"/images/favorite-button-on-196.png":"/images/favorite-button-off-196.png")+'" data-gameid="'+e+'" data-favorite="'+i+'" alt="Add '+s+' to your favorite games" onclick="varynApp.favoriteButtonClicked(this);"></div>',r+='<div class="caption"><a class="gameTitle" href="'+n+'" title="'+a+'"><h3>'+s+'</h3></a><p class="gamedescription">'+o+"</p>",r+="</div></div>"},setFavoriteGameButton:function(e,s){e&&(e.src=s?"/images/favorite-button-on-196.png":"/images/favorite-button-off-196.png",e.dataset.favorite=s?"true":"false")},favoriteButtonClicked:function(e){if(e){var s=parseInt(e.dataset.gameid);if(s>0)"true"==e.dataset.favorite?enginesisSession.userFavoriteGamesUnassign(s,(function(o){var t=o.results.status.message;console.log("Enginesis error "+t+" for favoriteGamesUnassign"),varynApp.setFavoriteGameButton(e,enginesisSession.isUserFavoriteGame(s))})):enginesisSession.userFavoriteGamesAssign(s,(function(o){var t=o.results.status.message;console.log("Enginesis error "+t+" for favoriteGamesAssign"),varynApp.setFavoriteGameButton(e,enginesisSession.isUserFavoriteGame(s))}))}},updateFavoriteGamesInContainer:function(e){var s,o,t,n,i=document.getElementById(e);if(null!=i)for(n=0;n<i.children.length;n++)null!=(o=i.children[n].querySelector("img.favorite-button"))&&(t=parseInt(o.dataset.gameid,10),s=enginesisSession.isUserFavoriteGame(t),this.setFavoriteGameButton(o,s))},makeAdModule:function(){return'<div class="gameModule thumbnail"><div class="row"><div class="col-sm-4 col-md-2 adContainer412"><div id="boxAd300" class="ad300x412">','<iframe src="/common/adModule.html" frameborder="0" scrolling="no" style="width: 300px; height: 412px; overflow: hidden; z-index: 9999; left: 0px; bottom: 0px; display: inline-block;"></iframe></div></div></div></div>','<div class="gameModule thumbnail"><div class="row"><div class="col-sm-4 col-md-2 adContainer412"><div id="boxAd300" class="ad300x412"><iframe src="/common/adModule.html" frameborder="0" scrolling="no" style="width: 300px; height: 412px; overflow: hidden; z-index: 9999; left: 0px; bottom: 0px; display: inline-block;"></iframe></div></div></div></div>'},isURL:function(e){return e.startsWith("/")||e.startsWith("http://")||e.startsWith("https://")},gameListGamesResponse:function(e,s,o,t){var n,i,r,a,u,l,g=this,d=document.getElementById(s),p=0,m=document.location.protocol+"//"+enginesisSession.serverBaseUrlGet()+"/games/",c=enginesisSession.isTouchDevice(),f=[3,21,41,60,80,100];if(null!=e&&e.length>0&&null!=d)for(t&&e.sort(g.compareTitle),(null==o||o<1)&&(o=e.length),i=0,l=f.length,n=0;n<e.length&&p<o;n++)r=e[n],c&&"10"!=r.game_plugin_id&&"9"!=r.game_plugin_id||(p++,(a=document.createElement("div")).className="col-sm-6 col-md-4",u=enginesisSession.isUserFavoriteGame(r.game_id,(function(e,s){console.log("Game ID "+e+" favorite: "+(s?"YES":"NO"));var o=a.querySelector("img.favorite-button");null!=o&&g.setFavoriteGameButton(o,s)})),a.innerHTML=g.makeGameModule(r.game_id,r.title,r.short_desc,m+r.game_name+"/images/300x225.png","/play/?id="+r.game_id,u),d.appendChild(a),i<l&&n+1==f[i]&&(i++,(a=document.createElement("div")).className="col-sm-6 col-md-4",a.innerHTML=g.makeAdModule(),a.id="AdSpot"+i,d.appendChild(a)));return p+i},gameListFavoriteGamesResponse:function(e,s,o,t){for(var n,i,r,a,u=document.getElementById(s),l=0,g=document.location.protocol+"//"+enginesisSession.serverBaseUrlGet()+"/games/",d=enginesisSession.isTouchDevice();null!=u&&u.firstChild;)u.firstChild.remove();if(null!=e&&e.length>0&&null!=u)for(t&&e.sort(this.compareTitle),(null==o||o<1)&&(o=e.length),n=0;n<e.length&&l<o;n++)i=e[n],d&&"10"!=i.game_plugin_id&&"9"!=i.game_plugin_id||(l++,a=this.makeGameModule(i.game_id,i.title,i.short_desc,g+i.game_name+"/images/300x225.png","/play/?id="+i.game_id,!0),(r=document.createElement("div")).className="col-sm-6 col-md-4",r.innerHTML=a,u.appendChild(r));return l},enginesisCallBack:function(e){var s,o,t,n;if(null!=e&&null!=e.fn)switch(s=(t=e.results).status.success,o=t.status.message,0==s&&console.log("Enginesis service error "+o+" from fn "+e.fn),e.fn){case"NewsletterAddressAssign":this.handleNewsletterServerResponse(s,o);break;case"GameListListGames":1==s&&(n=void 0!==t.passthru&&void 0!==t.passthru.game_list_id?t.passthru.game_list_id==siteConfiguration.gameListIdTop?"HomePageTopGames":"HomePageNewGames":"HomePageTopGames",this.gameListGamesResponse(t.result,n,null,null));break;case"UserLoginCoreg":var i=null;void 0!==t.result&&(i=void 0!==t.result.row?t.result.row:t.result),i?document.location.href="/profile/?action=completelogin&network_id="+getNetworkId():varynApp.showInfoMessagePopup("Login","There was a system issue while trying to login or register your account: "+o,0);break;case"RegisteredUserRequestPasswordChange":1==s?varynApp.showInfoMessagePopup("Change Password","A request to change your password has been sent to the email address on file. Please continue the password reset process from the link provided there.",0):(null!=t.status.extended_info&&(o+=" "+t.status.extended_info),varynApp.showInfoMessagePopup("Change Password","There was a system issue while trying to reset your password: "+o,0));break;case"PromotionItemList":1==s?varynApp.showHomePagePromotionModule(t.result):(null!=t.status.extended_info&&(o+=" "+t.status.extended_info),varynApp.showInfoMessagePopup("System error","There was a system issue while trying to load the home page: "+o,0));break;case"UserFavoriteGamesList":if(1==s){var r=varynApp.gameListFavoriteGamesResponse(t.result,"FavoriteGames",null,"title"),a=document.getElementById("FavoriteGamesContainer");null!=a&&(a.style.display=r>0?"block":"none"),varynApp.updateFavoriteGamesInContainer("HomePageTopGames"),varynApp.updateFavoriteGamesInContainer("HomePageNewGames"),varynApp.updateFavoriteGamesInContainer("AllGamesArea"),varynApp.updateFavoriteGamesInContainer("AboutPageHotGames")}break;default:console.log("Unhandled Enginesis reply for "+e.fn)}}}};function getDocumentSize(e){var s=document.getElementById(e),o={fullWidth:document.documentElement.clientWidth,fullHeight:document.documentElement.clientHeight},t=varyn.getEnginesisSession();return null==s&&(s=document.body),null!=s&&(o.containerWidth=s.clientWidth,o.containerHeight=s.clientHeight),null!=t&&(o.gameWidth=t.gameWidth,o.gameHeight=t.gameHeight,o.gameAspectRatio=t.gameAspectRatio),o}